The two-dimensional free-boundary problem of steady periodic waves with vorticity is considered for water of finite depth. We investigate how flows with small-amplitude Stokes waves on the free surface bifurcate from a horizontal parallel shear flow in which counter-currents may be present. Two bifurcation mechanisms are described: for waves with fixed Bernoulli's constant and fixed wavelength. In both cases the corresponding dispersion equations serve for defining wavelengths from which Stokes waves bifurcate. Sufficient conditions guaranteeing the existence of roots of these equations are obtained. Two particular vorticity distributions are considered in order to illustrate general results.