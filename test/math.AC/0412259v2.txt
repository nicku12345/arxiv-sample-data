The paper concerns Hochschild cohomology of a commutative algebra S, which is essentially of finite type over a commutative noetherian ring K and projective as a K-module, with coefficients in an S-module M. It is proved that vanishing of HH^n(S|K,M) in sufficiently long intervals imply the smoothness of S_q over K for all prime ideals q in the support of M. In particular, S is smooth if HH^n(S|K,S)=0 for (dim S+2) consecutive non-negative integers n.