We prove an analog of the holomorphic Lefschetz formula for endofunctors of smooth compact dg-categories. We deduce from it a generalization of the Lefschetz formula of V. Lunts that takes the form of a reciprocity law for a pair of commuting endofunctors. As an application, we prove a version of Lefschetz formula proposed by Frenkel and Ngo. Also, we compute explicitly the ingredients of the holomorphic Lefschetz formula for the dg-category of matrix factorizations of an isolated singularity w(x). We apply this formula to get some restrictions on the Betti numbers of a Z/2-equivariant module over k[[x_1,...,x_n]]/(w) in the case when w(-x)=w(x).