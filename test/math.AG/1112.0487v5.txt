We construct a new autoequivalence of the derived category of the Hilbert scheme of n points on a K3 surface, and of the variety of lines on a smooth cubic 4-fold. For Hilb^2 and the variety of lines, we use the theory of spherical functors; to deal with Hilb^n for n > 2 we develop a theory of P-functors. We conjecture that the same construction yields an autoequivalence for any moduli space of sheaves on a K3 surface.   In an appendix we give a cohomology and base change criterion which is well-known to experts, but not well-documented.