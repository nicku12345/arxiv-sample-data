We study the large time behavior of solutions to the porous medium equation in nonhomogeneous media with critical singular density  |x|^{-2}\partial_{t}u=\Delta u^m, \quad \hbox{in} \ \real^N\times(0,\infty),  where m>1 and N\geq3. The asymptotic behavior proves to have some interesting and striking properties. We show that there are different asymptotic profiles for the solutions, depending on whether the continuous initial data u_0 vanishes at x=0 or not. Moreover, when u_0(0)=0, we show the convergence towards a profile presenting a discontinuity in form of a shockwave, coming from an unexpected asymptotic simplification to a conservation law, while when u_0(0)>0, the limit profile remains continuous. These phenomena illustrate the strong effect of the singularity at x=0. We improve the time scale of the convergence in sets avoiding the singularity. On the way, we also study the large-time behavior for a porous medium equation with convection which is interesting for itself.