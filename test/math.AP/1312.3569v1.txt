We consider the Ginzburg-Landau functional with a variable applied magnetic field in a bounded and smooth two dimensional domain. We determine an accurate asymptotic formula for the minimizing energy when the Ginzburg-Landau parameter and the magnetic field are large and of the same order. As a consequence, it is shown how bulk superconductivity decreases in average as the applied magnetic field increases.