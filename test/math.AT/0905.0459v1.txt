In this paper, we describe a general theory of "spaces with structure sheaves." Specializations of this theory include the classical theory of schemes, the theory of Deligne-Mumford stacks, and their derived generalizations.