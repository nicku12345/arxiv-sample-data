The aim of this paper is to exhibit a necessary and sufficient condition of optimality for functionals depending on fractional integrals and derivatives, on indefinite integrals and on presence of time delay. We exemplify with one example, where we find analytically the minimizer.