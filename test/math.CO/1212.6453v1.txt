Using double counting, we prove Delsarte inequalities for q-ary codes and their improvements. Applying the same technique to q-ary constant-weight codes, we obtain new inequalities for q-ary constant-weight codes.