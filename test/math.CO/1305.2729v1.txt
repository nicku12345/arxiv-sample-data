Figueroa-Centeno et al. introduced the following product of digraphs: let D be a digraph and let \Gamma be a family of digraphs such that V(F)=V for every F\in \Gamma. Consider any function h:E(D)\longrightarrow\Gamma . Then the product D\otimes_{h} \Gamma is the digraph with vertex set V(D)\times V and ((a,x),(b,y))\in E(D\otimes_h\Gamma) if and only if (a,b)\in E(D) and (x,y)\in E(h (a,b)).   In this paper, we introduce the undirected version of the \otimes_h-product, which is a generalization of the classical direct product of graphs and, motivated by it, we also recover a generalization of the classical lexicographic product of graphs that was introduced by Sabidussi en 1961. We study connectivity properties and other invariants in terms of the factors. We also present a new intersection graph that emerges when we characterize the connectivity of \otimes_h-product of graphs.