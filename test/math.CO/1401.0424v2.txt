In this paper, we study the large-scale structure of dense regular graphs. This involves the notion of robust expansion, a recent concept which has already been used successfully to settle several longstanding problems. Roughly speaking, a graph is robustly expanding if it still expands after the deletion of a small fraction of its vertices and edges. Our main result allows us to harness the useful consequences of robust expansion even if the graph itself is not a robust expander. It states that every dense regular graph can be partitioned into `robust components', each of which is a robust expander or a bipartite robust expander. We apply our result to obtain (amongst others) the following. (i) We prove that whenever \eps >0, every sufficiently large 3-connected D-regular graph on n vertices with D \geq (1/4 + \eps)n is Hamiltonian. This asymptotically confirms the only remaining case of a conjecture raised independently by Bollob\'as and H\"aggkvist in the 1970s. (ii) We prove an asymptotically best possible result on the circumference of dense regular graphs of given connectivity. The 2-connected case of this was conjectured by Bondy and proved by Wei.