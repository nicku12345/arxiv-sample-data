In this paper, we shall give a new upper diameter estimate for complete Riemannian manifolds in the case that the Bakry-\'Emery Ricci curvature has a positive lower bound and the norm of the potential function has an upper bound. Our diameter estimate improves previous ones obtained by Wei and Wylie (J. Differential Geom. 83, 377--405, 2009) and Limoncu (Math. Z. 271, 715--722, 2012). As an application, we shall give an upper diameter bound for compact Ricci solitons in terms of the maximum value of the scalar curvature. By using such a diameter bound, we shall provide some new sufficient conditions for four-dimensional compact Ricci solitons to satisfy the Hitchin-Thorpe inequality.