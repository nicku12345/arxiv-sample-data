We prove a new generalization of the Cheeger-Gromoll splitting theorem where we obtain a warped product splitting under the existence of a line. The curvature condition in our splitting is a curvature dimension inequality of the form CD(0,1). Even though we have to allow warping in our splitting, we are able to recover topological applications. In particular, for a smooth compact Riemannian manifold admitting a density which is CD(0,1), we show that the fundamental group of M is the fundamental group of a compact manifold with nonnegative sectional curvature. If the space is also locally homogeneous, we obtain that the space also admits a metric of non-negative sectional curvature. Both of these obstructions give many examples of Riemannian metrics which do not admit any smooth density which is CD(0,1).