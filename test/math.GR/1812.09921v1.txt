Given a torsion-free p-adic analytic pro-p group G with \mathrm{dim}(G) < p, we show that the self-similar actions of G on regular rooted trees can be studied through the virtual endomorphisms of the associated \mathbb{Z}_p-Lie lattice. We explicitly classify 3-dimensional unsolvable \mathbb{Z}_p-Lie lattices for p odd, and study their virtual endomorphisms. Together with Lazard's correspondence, this allows us to classify 3-dimensional unsolvable torsion-free p-adic analytic pro-p groups for p\geqslant 5, and to determine which of them admit a faithful self-similar action on a p-ary tree. In particular, we show that no open subgroup of SL_1^1(\Delta_p) admits such an action. On the other hand, we prove that all the open subgroups of SL_2^{\triangle}(\mathbb{Z}_p) admit faithful self-similar actions on regular rooted trees.