In this paper, a third-order weighted essentially non-oscillatory (WENO) scheme is developed for hyperbolic conservation laws on unstructured quadrilateral and triangular meshes. As a starting point, a general stencil is selected for the cell with any local topology, and a unified linear scheme can be constructed. However, in the traditional WENO scheme on unstructured meshes, the very large and negative weights may appear for the mesh with lower quality, and the very large weights make the WENO scheme unstable even for the smooth tests. In the current scheme, an optimization approach is given to deal with the very large linear weights, and the splitting technique is considered to deal with the negative weights obtained by the optimization approach. The non-linear weight with a new smooth indicator is proposed as well, in which the local mesh quality and discontinuities of solutions are taken into account simultaneously. Numerical tests are presented to validate the current scheme. The expected convergence rate of accuracy is obtained, and the absolute value of error is not affected by mesh quality. The numerical tests with strong discontinuities validate the robustness of current WENO scheme.