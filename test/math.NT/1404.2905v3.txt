In previous papers we formulated an analogue of the Ichino--Ikeda conjectures for Whittaker--Fourier coefficients of automorphic forms on classical group and the metaplectic group. In the latter case we reduced the conjecture to a local identity. In this paper we will prove the local identity in the p-adic case, and hence the global conjecture under simplifying conditions at the archimedean places.