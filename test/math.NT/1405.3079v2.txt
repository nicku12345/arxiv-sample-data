We construct motivic cohomology classes attached to Rankin--Selberg convolutions of modular forms of weights \ge 2, show that these vary analytically in p-adic families, and relate their image under the p-adic regulator map to values of L-functions. As consequences, we prove new cases of Perrin-Riou's conjecture on motivic L-values; we prove finiteness results for Tate--Shafarevich groups for twists of elliptic curves by dihedral Artin characters; and we prove one inclusion in the Iwasawa main conjecture for a single modular form over an imaginary quadratic field.