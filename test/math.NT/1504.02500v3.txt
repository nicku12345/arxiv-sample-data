Building on work of Hardy and Ramanujan, Rademacher proved a well-known formula for the values of the ordinary partition function p(n). More recently, Bruinier and Ono obtained an algebraic formula for these values. Here we study the smallest parts function introduced by Andrews; \operatorname{spt}(n) counts the number of smallest parts in the partitions of n. The generating function for \operatorname{spt}(n) forms a component of a natural mock modular form of weight 3/2 whose shadow is the Dedekind eta function. Using automorphic methods (in particular the theta lift of Bruinier and Funke), we obtain an exact formula and an algebraic formula for its values. In contrast with the case of p(n), the convergence of our expression is non-trivial, and requires power savings estimates for weighted sums of Kloosterman sums for a multiplier in weight 1/2. These are proved with spectral methods (following an argument of Goldfeld and Sarnak).