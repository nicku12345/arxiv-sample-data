In this paper we give a decomposition of a state on a C^*-algebra into a family of pure states and a decomposition of a representation into a family of irreducible representation. Then, we use it to solve the following three problems and/or conjectures.. (1) The noncommutative Stone-Weierstrass problem, (2) The extension problem (asked by Arveson) of a pure state on a nonseparable operator system to a boundary state on the generated C^*-algebra, and (3) The hyperrigidity problem of an operator system under the hypothesis that pure states have the unique extension property, conjectured by Arveson.