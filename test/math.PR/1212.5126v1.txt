In this chapter we propose an extended concept of the expected discounted penalty function (EDPF) that takes into account new ruin-related random variables. We add to the EDPF, which was introduced in classical papers [Gerber and Shiu (1997), (1998) and Gerber and Landry (1998)], a sequence of expected discounted functions of new record minima reached by a jump of the risk process after ruin. Inspired by results of Huzak et al. (2004) and developpements in fluctuation theory for spectrally negative L\'evy processes, we provide a characterization for this extended EDPF in a setting involving a cumulative claims modelled by a subordinator, and Brownian perturbation. We illustrate how the extended EDPF can be used to compute the expected discounted value of capital injections (EDVCI) for Brownian perturbed risk model.