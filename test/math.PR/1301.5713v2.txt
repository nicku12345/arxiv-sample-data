In this article we refine well-known results concerning the fluctuations of one-dimensional random walks. More precisely, if (S_n)_{n \geq 0} is a random walk starting from 0 and r\geq 0, we obtain the precise asymptotic behavior as n\to\infty of \mathbb P[\tau^{>r}=n, S_n\in K] and \mathbb P[\tau^{>r}>n, S_n\in K], where \tau^{>r} is the first time that the random walk reaches the set ]r,\infty[, and K is a compact set. Our assumptions on the jumps of the random walks are optimal. Our results give an answer to a question of Lalley stated in [9], and are applied to obtain the asymptotic behavior of the return probabilities for random walks on \mathbb R^+ with non-elastic reflection at 0.