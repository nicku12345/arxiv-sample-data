In previous works we have introduced a new method called the lent particle method which is an efficient tool to establish existence of densities for Poisson functionals. We now go further and iterate this method in order to prove smoothness of densities. More precisely, we construct Sobolev spaces of any order and prove a Malliavin-type criterion of existence of smooth density. We apply this approach to SDE's driven by Poisson random measures and also present some non-trivial examples to which our method applies.