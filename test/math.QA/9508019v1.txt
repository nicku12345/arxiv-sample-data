In this paper we give a geometric construction of Cherednik's double affine Hecke algebra.   We construct the algebra as the equivariant K-theory of the Lagrangian subvariety of the cotangent variety of the square of the flag variety of G, the variety being given by the union of the conormal bundles to the G-orbits on \flag\times\flag.   This is a generalisation of work of Kazhdan and Lusztig to the Kac-Moody case, and is suitable for describing a certain class of modules for this algebra. In a paper in preparation we will do this, in the case G is affine (Cherednik's case).