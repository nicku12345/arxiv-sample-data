We give a definition of weak n-categories based on the theory of operads. We work with operads having an arbitrary set S of types, or `S-operads', and given such an operad O, we denote its set of operations by elt(O). Then for any S-operad O there is an elt(O)-operad O+ whose algebras are S-operads over O. Letting I be the initial operad with a one-element set of types, and defining I(0) = I, I(i+1) = I(i)+, we call the operations of I(n-1) the `n-dimensional opetopes'. Opetopes form a category, and presheaves on this category are called `opetopic sets'. A weak n-category is defined as an opetopic set with certain properties, in a manner reminiscent of Street's simplicial approach to weak omega-categories. Similarly, starting from an arbitrary operad O instead of I, we define `n-coherent O-algebras', which are n times categorified analogs of algebras of O. Examples include `monoidal n-categories', `stable n-categories', `virtual n-functors' and `representable n-prestacks'. We also describe how n-coherent O-algebra objects may be defined in any (n+1)-coherent O-algebra.