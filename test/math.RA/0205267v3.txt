We generalize a theorem of Kapranov by showing that the Hall algebra of the category of coherent sheaves on a weighted projective line (over a finite field) provides a realization of the (quantized) enveloping algebra of a certain nilpotent subalgebra of the affinization of the correponding Kac-Moody algebra. In particular this yieds a geometric realization of the quantized enveloping algebra of 2-toroidal (or elliptic) algebras of types D_4, E_6, E_7 or E_8 in terms of weighted projective lines of genus one.