Because they play a role in our understanding of the symmetric group algebra, Lie idempotents have received considerable attention. The Klyachko idempotent has attracted interest from combinatorialists, partly because its definition involves the major index of permutations.   For the symmetric group S_n, we look at the symmetric group algebra with coefficients from the field of rational functions in n variables q_1,..., q_n. In this setting, we can define an n-parameter generalization of the Klyachko idempotent, and we show it is a Lie idempotent in the appropriate sense. Somewhat surprisingly, our proof that it is a Lie element emerges from Stanley's theory of P-partitions.