We generalize Stembridge's enriched P-partitions and use this theory to outline the structure of peak algebras for the symmetric group and the hyperoctahedral group. Whereas Stembridge's enriched P-partitions are related to quasisymmetric functions (the coalgebra dual to Solomon's type A descent algebra), our generalized enriched P-partitions are related to type B quasisymmetric functions (the coalgebra dual to Solomon's type B descent algebra). Using these functions, we explore three different peak algebras: the "interior" and "left" peak algebras of type A, and a new type B peak algebra. Our results specialize to results for commutative peak algebras as well.