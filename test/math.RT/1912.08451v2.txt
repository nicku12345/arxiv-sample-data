Let G be any connected reductive group over a non-archimedean local field. We analyse the unipotent representations of G, in particular in the cases where G is ramified. We establish a local Langlands correspondence for this class of representations, and we show that it satisfies all the desiderata of Borel as well as the conjecture of Hiraga, Ichino and Ikeda about formal degrees.   This generalizes work of Lusztig and of Feng, Opdam and the author, to reductive groups that do not necessarily split over an unramified extension of the ground field. We also interpret our results in terms of rigid inner twists of G.