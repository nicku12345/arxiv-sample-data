The moduli space of SL(2) flat connections on a punctured Riemann surface with the fixed conjugacy classes of the monodromies around the punctures is endowed with a system of holomorphic Darboux coordinates, in which the generating function of the variety of SL(2)-opers is identified with the universal part of the effective twisted superpotential of the corresponding four dimensional N=2 supersymmetric theory subject to the two-dimensional Omega-deformation. This allows to give a definition of the Yang-Yang functionals for the quantum Hitchin system in terms of the classical geometry of the moduli space of local systems for the dual gauge group, and connect it to the instanton counting of the four dimensional gauge theories, in the rank one case.