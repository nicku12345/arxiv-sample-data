An algorithm for computing an analytic function of a matrix A is described. The algorithm is intended for the case where A has some close eigenvalues, and clusters (subsets) of close eigenvalues are separated from each other. This algorithm is a modification of some well known and widely used algorithms. A novel feature is an approximate calculation of divided differences for the Newton interpolating polynomial in a special way. This modification does not require to reorder the Schur triangular form and to solve Sylvester equations.