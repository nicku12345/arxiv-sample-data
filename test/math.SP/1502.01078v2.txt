Using the Davies-Helffer-Sj\"ostrand functional calculus based on almost analytic extensions, we address the following problem: Given self-adjoint operators S_j, j=1,2, in \mathcal{H}, and functions f in an appropriate class, for instance, f \in C_0^{\infty}(\mathbb{R}), how to control the norm \|f(S_2) - f(S_1)\|_{\mathcal{B}(\mathcal{H})} in terms of the norm of the difference of resolvents, \|(S_2 - z_0 I_{\mathcal{H}})^{-1} - (S_2 - z_0 I_{\mathcal{H}})^{-1}\|_{\mathcal{B}(\mathcal{H})}, for some z_0 \in \mathbb{C}\backslash\mathbb{R}. We are particularly interested in the case where \mathcal{B}(\mathcal{H}) is replaced by a trace ideal, \mathcal{B}_p(\mathcal{H}), p \in [1,\infty).