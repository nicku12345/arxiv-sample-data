We consider a self-adjoint non-negative operator H in a Hilbert space \mathsf{L}^2(X,{\rm d}\mu). We assume that the semigroup (\mathrm{e}^{-t H})_{t>0} is defined by an integral kernel, p, which allows an estimate of the form p(t,x,x)\le F_1(x)F_2(t) for all (x,t)\in X\times\mathbb{R_+}; we refer to F_1 as the \emph{control function}. We show that such an estimate leads to rather satisfying abstract results on relative compactness of perturbations of H by potentials. It came as a surprise to us, however, that such an estimate holds for the Laplace-Beltrami operator on \emph{any} Riemannian manifold. In particular, using a domination principle, one can deduce from the latter fact a very general result on the relative compactness of perturbations by potentials of the Bochner Laplacian associated with a Hermitian bundle (E, h^E,\nabla^E) over an arbitrary Riemannian manifold (M,g); in fact, only quantities of order zero in g enter in the estimates. We extend this result to weighted Riemannian manifolds, where under lower curvature bounds on the \alpha-Bakry-\'{E}mery tensor one can construct quite explicit control functions, and to any weighted graph, where the control function is expressed in terms of the vertex weight function.