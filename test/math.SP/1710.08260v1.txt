We develop the theory of modulated operators in general principal ideals of compact operators. For Laplacian modulated operators we establish Connes' trace formula in its local Euclidean model and a global version thereof. It expresses Dixmier traces in terms of the vector-valued Wodzicki residue. We demonstrate the applicability of our main results in the context of log-classical pseudo-differential operators, studied by Lesch, and a class of operators naturally appearing in noncommutative geometry.