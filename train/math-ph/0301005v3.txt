The paper contains a complete theory of factors for ray representations acting in a Hilbert bundle, which is a generalization of the known Bargmann's theory. With the help of it we have reformulated the standard quantum theory such that the gauge freedom emerges naturally from the very nature of quantum laws. The theory is of primary importance in the investigations of covariance (in contradistinction to symmetry) of a quantum theory which possesses a nontrivial gauge freedom. In that case the group in question is not any symmetry group but it is a covariance group only - that case which has not been deeply investigated. It is shown on the paper that the factor of its representation depends on space and time when the system in question possesses a gauge freedom. In the nonrelativistic theories the factor depends on the time only. In the relativistic theory the Hilbert bundle is over the spacetime in the nonrelativistic one it is over the time.   We explain two applications of this generalization: in a theory of a quantum particle in the nonrelativistic limit and in the quantum electrodynamics.