An extension of the Legendre transform to non-convex functions with vanishing Hessian as a mix of envelope and general solutions of the Clairaut equation is proposed. Applying this to systems with constraints, the procedure of finding a Hamiltonian for a degenerate Lagrangian is just that of solving a corresponding Clairaut equation with a subsequent application of the proposed Legendre-Clairaut transformation. In this way the unconstrained version of Hamiltonian equations is obtained. The Legendre-Clairaut transformation presented is involutive. We demonstrate the origin of the Dirac primary constraints, along with their explicit form, and this is done without using the Lagrange multiplier method.