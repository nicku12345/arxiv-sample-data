We present a (mathematically rigorous) probabilistic and geometrical proof of the KPZ relation between scaling exponents in a Euclidean planar domain D and in Liouville quantum gravity. It uses the properly regularized quantum area measure d\mu_\gamma=\epsilon^{\gamma^2/2} e^{\gamma h_\epsilon(z)}dz, where dz is Lebesgue measure on D, \gamma is a real parameter, 0\leq \gamma <2, and h_\epsilon(z) denotes the mean value on the circle of radius \epsilon centered at z of an instance h of the Gaussian free field on D. The proof extends to the boundary geometry. The singular case \gamma >2 is shown to be related to the quantum measure d\mu_{\gamma'}, \gamma' < 2, by the fundamental duality \gamma\gamma'=4.