In previous articles, a magnetic pseudodifferential calculus and a family of C*-algebras associated with twisted dynamical systems were introduced and the connections between them have been established. We extend this formalism to symbol classes of H\"ormander type with an x-behavior modelized by an abelian C*-algebra. Some of these classes generate C*-algebras associated with the twisted dynamical system. We show the relevance of these classes to the spectral analysis of pseudodifferential operators with anisotropic symbols and magnetic fields.