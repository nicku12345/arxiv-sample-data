The test ideal \tau(R) of a ring R of prime characteristic is an important object in the theory of tight closure. In this paper, we study a generalization of the test ideal, which is the ideal \tau(\a^t) associated to a given ideal \a with rational exponent t \ge 0. We first prove a key lemma of this paper, which gives a characterization of the ideal \tau(\a^t). As applications of this key lemma, we generalize the preceding results on the behavior of the test ideal \tau(R). Moreover, we prove an analog of so-called Skoda's theorem, which is formulated algebraically via adjoint ideals by Lipman in his proof of the "modified Brian\c{c}on--Skoda theorem."