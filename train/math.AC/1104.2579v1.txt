We present a complete description of subdirectly irreducible state BL-algebras as well as of subdirectly irreducible state-morphism BL-algebras. In addition, we present a general theory of state-morphism algebras, that is, algebras of general type with state-morphism which is an idempotent endomorphism. We define a diagonal state-morphism algebra and we show that every subdirectly irreducible state-morphism algebra can be embedded into a diagonal one. We describe generators of varieties of state-morphism algebras, in particular ones of state-morphism BL-algebras, state-morphism MTL-algebras, state-morphism non-associative BL-algebras, and state-morphism pseudo MV-algebras.