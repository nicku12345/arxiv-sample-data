Several authors have proved Lefschetz type formulae for the local Euler obstruction. In particular, a result of this type is proved in [BLS].The formula proved in that paper turns out to be equivalent to saying that the local Euler obstruction, as a constructible function, satisfies the local Euler condition (in bivariant theory) with respect to general linear forms.   The purpose of this work is to understand what prevents the local Euler obstruction of satisfying the local Euler condition with respect to functions which are singular at the considered point. This is measured by an invariant (or ``defect'') of such functions that we define below. We give an interpretation of this defect in terms of vanishing cycles, which allows us to calculate it algebraically. When the function has an isolated singularity, our invariant can be defined geometrically, via obstruction theory. We notice that this invariant unifies the usual concepts of {\it the Milnor number} of a function and of the {\it local Euler obstruction} of an analytic set.