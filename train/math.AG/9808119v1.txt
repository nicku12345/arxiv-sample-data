The main message of the paper is that for Gorenstein singularities, whose (real) link is rational homology sphere, the Artin--Laufer program can be continued. Here we give the complete answer in the case of elliptic singularities. The main result of the paper says that in the case of an elliptic Gorenstein singularity whose link is rational homology sphere, the geometric genus is a topological invariant. Actually, it is exactly the length of the elliptic sequence in the minimal resolution (or, equivalently, in S. S.-T. Yau's terminology: these singularities are maximally elliptic). In the paper we characterize the singularities with this property, and we compute their Hilbert-Samuel function from their resolution graph (generalizing some results of Laufer and Yau). The obstruction for a normal surface singularity to be maximally elliptic can be connected with the torsion part of some Picard groups, this is the new idea of the paper.