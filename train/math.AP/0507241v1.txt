The extended principle of minimal action is described in the presence of prescribed source and sink points. Under the assumption of zero net flux, it leads to an optimal Monge-Kantorovich transport problem of metric type. We concentrate on action corresponding to a mecahnical Lagrangian. The optimal solution turns out to be a measure supprted on a graph composed of geodesic arcs connecting pairs of sources and sinks.