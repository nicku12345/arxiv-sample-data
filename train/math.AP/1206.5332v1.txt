We study a class of nonlinear diffusion equations whose model is the classical porous media equation on domains \Omega\subseteq{\mathbb R}^N, N\ge3, with homogeneous Neumann boundary conditions. Firstly we improve some known results in such model case, both as concerns sharp L^{q_0}-L^\infty regularizing properties of the evolution for short time and as concerns sharp long time asymptotics in the sense of L^\infty convergence of solutions to their mean value. The generality of the discussion allows to consider, almost at the same time, also weighted versions of the above equation provided an appropriate weighted Sobolev inequality is required to hold. \normalcolor In fact, we show that the validity of a slightly weaker functional inequality is equivalent to the validity of a suitable L^{q_0}-L^\infty bound for solutions to the associated weighted porous media equation. The long time asymptotic analysis relies as well on the assumed weighted Sobolev inequality only, and allows to prove uniform convergence to the mean value, with the rate predicted by linearization, in such generality. This fact was not known even for the explicit classes of weights previously considered in the literature.