We study the rational homotopy types of classifying spaces of automorphism groups of smooth simply connected manifolds of dimension at least five. We give dg Lie algebra models for the homotopy automorphisms and the block diffeomorphisms of such manifolds.   Moreover, we use these models to calculate the rational cohomology of the classifying spaces of the homotopy automorphisms and block diffeomorphisms of the manifold #^g S^d x S^d relative to an embedded disk as g tends to infinity. The answer is expressed in terms of stable cohomology of arithmetic groups and invariant Lie algebra cohomology. Through an extension of Kontsevich's work on graph complexes, we relate our results to the (unstable) homology of automorphisms of free groups with boundaries.