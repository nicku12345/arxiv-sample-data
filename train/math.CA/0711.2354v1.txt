In this article we introduce Triebel--Lizorkin spaces with variable smoothness and integrability. Our new scale covers spaces with variable exponent as well as spaces of variable smoothness that have been studied in recent years. Vector-valued maximal inequalities do not work in the generality which we pursue, and an alternate approach is thus developed. Applying it, we give molecular and atomic decomposition results and show that our space is well-defined, i.e., independent of the choice of basis functions.   As in the classical case, a unified scale of spaces permits clearer results in cases where smoothness and integrability interact, such as Sobolev embedding and trace theorems. As an application of our decomposition, we prove optimal trace theorems in the variable indices case.