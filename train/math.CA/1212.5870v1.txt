A local Tb theorem is an L^2 boundedness criterion by which the question of the global behavior of an operator is reduced to its local behavior, acting on a family of test functions b_Q indexed by the dyadic cubes. We present several versions of such results, in particular, treating square function operators whose kernels do not satisfy the standard Littlewood-Paley pointwise estimates. As an application of one version of the local Tb theorem, we show how the solvability of the Kato problem (which was implicitly based on local Tb theory) may be deduced from this general criterion. We also present another version, from which we deduce boundedness of layer potentials associated to certain complex elliptic operators in divergence form.