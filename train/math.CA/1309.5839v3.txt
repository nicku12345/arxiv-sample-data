Given two weights \sigma, w on \mathbb R ^{n}, the classical g-function satisfies the norm inequality \lVert g (f\sigma)\rVert_{L ^2 (w)} \lesssim \lVert f\rVert_{L ^2 (\sigma)} if and only if the two weight Muckenhoupt A_2 condition holds, and a family of testing conditions holds, namely \begin{equation*} \iint_{Q (I)} (\nabla P_t (\sigma \mathbf 1_I)(x, t))^2 \; dw \, t dt \lesssim \sigma (I) \end{equation*} uniformly over all cubes I \subset \mathbb R ^{n}, and Q (I) is the Carleson box over I. A corresponding characterization for the intrinsic square function of Wilson also holds.