We characterize the L^p(\sigma)\to L^q(\omega) boundedness of positive dyadic operators of the form    T(f\sigma)=\sum_{Q\in\mathscr{D}}\lambda_Q\int_Q f\,\mathrm{d}\sigma\cdot 1_Q,  and the L^{p_1}(\sigma_1)\times L^{p_2}(\sigma_2)\to L^q(\omega) boundedness of their bilinear analogues, for arbitrary locally finite measures \sigma,\sigma_1,\sigma_2,\omega. In the linear case, we unify the existing "Sawyer testing" (for p\leq q) and "Wolff potential" (for p>q) characterizations into a new "sequential testing" characterization valid in all cases. We extend these ideas to the bilinear case, obtaining both sequential testing and potential type characterizations for the bilinear operator and all p_1,p_2,q\in(1,\infty). Our characterization covers the previously unknown case q<\frac{p_1p_2}{p_1+p_2}, where we introduce a new two-measure Wolff potential.