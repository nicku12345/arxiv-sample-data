This paper highlights an unexpected connection between expansions of real numbers to noninteger bases (so-called {\em \beta-expansions}) and the infinite derivatives of a class of self-affine functions. Precisely, we extend Okamoto's function (itself a generalization of the well-known functions of Perkins and Katsuura) to a two-parameter family \{F_{N,a}: N\in\mathbb{N}, a\in(0,1)\}. We first show that for each x, F_{N,a}'(x) is either 0, \pm\infty, or undefined. We then extend Okamoto's theorem by proving that for each N, depending on the value of a relative to a pair of thresholds, the set \{x: F_{N,a}'(x)=0\} is either empty, uncountable but Lebesgue null, or of full Lebesgue measure. We compute its Hausdorff dimension in the second case.   The second result is a characterization of the set \mathcal{D}_\infty(a):=\{x:F_{N,a}'(x)=\pm\infty\}, which enables us to closely relate this set to the set of points which have a unique expansion in the (typically noninteger) base \beta=1/a. Recent advances in the theory of \beta-expansions are then used to determine the cardinality and Hausdorff dimension of \mathcal{D}_\infty(a), which depends qualitatively on the value of a relative to a second pair of thresholds.