We consider boundedness of a certain positive dyadic operator  T^\sigma \colon L^p(\sigma; \ \! \ell^2) \to L^p(\omega),  that arose during our attempts to develop a two-weight theory for the Hilbert transform in L^p. Boundedness of T^\sigma is characterized when p \in [2, \infty) in terms of certain testing conditions. This requires a new Carleson-type embedding theorem that is also proved.