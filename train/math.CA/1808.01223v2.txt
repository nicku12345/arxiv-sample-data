In this paper we construct a wavelet basis in weighted L^2 of Euclidean space possessing vanishing moments of a fixed order for a general locally finite positive Borel measure. The approach is based on a clever construction of Alpert in the case of Lebesgue measure that is appropriately modified to handle the general measures considered here. We then use this new wavelet basis to study a two-weight inequality for a general Calder\'on-Zygmund operator on the real line and show that under suitable natural conditions, including a weaker energy condition, the operator is bounded from one weighted L^2 space to another if certain stronger testing conditions hold on polynomials. An example is provided showing that this result is logically different than existing results in the literature.