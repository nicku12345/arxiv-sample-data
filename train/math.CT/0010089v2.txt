We prove a conjecture by Lusztig, which describes the tensor categories of perverse sheaves on affine flag manifolds, with tensor structure provided by truncated convolution, in terms of the Langlands dual group. We also give a geometric (categorical) description of Lusztig's bijection between two-sided cells in an affine Weyl group, and unipotent conjugacy classes in the Langlands dual group. The main tool is the sheaf-theoretic construction of the center of the affine Hecke algebra due to Gaitsgory (based on ideas of Beilinson and Kottwitz), see math.AG/9912074.