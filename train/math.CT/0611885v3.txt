We introduce the notion of generalized bialgebra, which includes the classical notion of bialgebra (Hopf algebra) and many others. We prove that, under some mild conditions, a connected generalized bialgebra is completely determined by its primitive part. This structure theorem extends the classical Poincar\'e-Birkhoff-Witt theorem and the Cartier-Milnor-Moore theorem, valid for cocommutative bialgebras, to a large class of generalized bialgebras. Technically we work in the theory of operads which permits us to give a conceptual proof of our main theorem. It unifies several results, generalizing PBW and CMM, scattered in the literature. We treat many explicit examples and suggest a few conjectures.