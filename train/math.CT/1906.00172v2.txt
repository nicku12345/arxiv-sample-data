We use the formalism of traces in higher categories to prove a common generalization of the holomorphic Atiyah-Bott fixed point formula and the Grothendieck-Riemann-Roch theorem. The proof is quite different from the original one proposed by Grothendieck et al.: it relies on the interplay between self dualities of quasi- and ind- coherent sheaves on X and formal deformation theory of Gaitsgory-Rozenblyum. In particular, we give a description of the Todd class in terms of the difference of two formal group structures on the derived loop scheme \mathcal LX. The equivariant case is reduced to the non-equivariant one by a variant of the Atiyah-Bott localization theorem.