We present a homotopy theory for a weak version of modular operads whose compositions and contractions are only defined up to homotopy. This homotopy theory takes the form of a Quillen model structure on the collection of simplicial presheaves for a certain category of undirected graphs. This new category of undirected graphs, denoted \mathbf{U}, plays a similar role for modular operads that the dendroidal category \Omega plays for operads. We carefully study properties of \mathbf{U}, including the existence of certain factorization systems. Related structures, such as cyclic operads and stable modular operads, can be similarly treated using categories derived from \mathbf{U}.