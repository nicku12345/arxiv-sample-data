The aim of this paper is to provide an expansion to Abe-Nakaoka's heart construction of the following two different realizations of the module category over the endomorphism ring of a rigid object in a triangulated category: Buan-Marsh's localization and Iyama-Yoshino's subfactor. Our method depends on a modification of Nakaoka-Palu's HTCP localization, a Gabriel-Zisman localization of extriangulated categories which is also realized as a subfactor of the original ones. Besides of the heart construction, our generalized HTCP localization involves the following phenomena: (1) stable category with respect to a class of objects; (2) recollement of triangulated categories; (3) recollement of abelian categories under a mild assumption.