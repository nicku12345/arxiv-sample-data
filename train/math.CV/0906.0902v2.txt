For each closed, positive (1,1)-current \omega on a complex manifold X and each \omega-upper semicontinuous function \phi on X we associate a disc functional and prove that its envelope is equal to the supremum of all \omega-plurisubharmonic functions dominated by \phi. This is done by reducing to the case where \omega has a global potential. Then the result follows from Poletsky's theorem, which is the special case \omega=0. Applications of this result include a formula for the relative extremal function of an open set in X and, in some cases, a description of the \omega-polynomial hull of a set.