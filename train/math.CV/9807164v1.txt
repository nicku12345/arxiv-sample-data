We introduce a new type of pluricomplex Green function which has a logarithmic pole along a complex subspace A of a complex manifold X. It is the largest negative plurisubharmonic function on X whose Lelong number is at least the Lelong number of log max{|f_1|,...,|f_m|}, where f_1,...,f_m are local generators for the ideal sheaf of A. The pluricomplex Green function with a single logarithmic pole or a finite number of weighted poles is a very special case of our construction. We give several equivalent definitions of this function and study its properties, including boundary behaviour, continuity, and uniqueness. This is based on and extends our previous work on disc functionals and their envelopes.