We give a necessary and sufficient condition for a 2-dimensional Riemannian manifold to be locally isometrically immersed into a 3-dimensional homogeneous manifold with a 4-dimensional isometry group. The condition is expressed in terms of the metric, the second fundamental form, and data arising from an ambient Killing field. This class of 3-manifolds includes in particular the Berger spheres, the Heisenberg space Nil(3), the universal cover of the Lie group PSL(2,R) and the product spaces S^2 x R and H^2 x R. We give some applications to constant mean curvature (CMC) surfaces in these manifolds; in particular we prove the existence of a generalized Lawson correspondence, i.e., a local isometric correspondence between CMC surfaces in homogeneous 3-manifolds.