We prove a weighted Sobolev inequality and a Hardy inequality on manifolds with nonnegative Ricci curvature satisfying an inverse doubling volume condition. It enables us to obtain rigidity results for Ricci flat manifolds, generalizing earlier work of Bando, Kasue and Nakajima.