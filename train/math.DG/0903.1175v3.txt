We introduce a double complex that can be associated to certain Lie algebras, and show that its cohomology determines an obstruction to the existence of a half-flat SU(3)-structure. We obtain a classification of the 6-dimensional nilmanifolds carrying an invariant half-flat structure.