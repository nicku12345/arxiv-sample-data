We study a partially hyperbolic and topologically transitive local diffeomorphism F that is a skew-product over a horseshoe map. This system is derived from a homoclinic class and contains infinitely many hyperbolic periodic points of different indices and hence is not hyperbolic. The associated transitive invariant set \Lambda possesses a very rich fiber structure, it contains uncountably many trivial and uncountably many non-trivial fibers. Moreover, the spectrum of the central Lyapunov exponents of F|_{\Lambda} contains a gap and hence gives rise to a first order phase transition. A major part of the proofs relies on the analysis of an associated iterated function system that is genuinely non-contracting.