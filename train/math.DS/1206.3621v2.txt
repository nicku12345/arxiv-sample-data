Bowen showed that a continuous expansive map with specification has a unique measure of maximal entropy. We show that the conclusion remains true under weaker non-uniform versions of these hypotheses. To this end, we introduce the notions of obstructions to expansivity and specification, and show that if the entropy of such obstructions is smaller than the topological entropy of the map, then there is a unique measure of maximal entropy.