The Krieger generator theorem says that every invertible ergodic measure-preserving system with finite measure-theoretic entropy can be embedded into a full shift with strictly greater topological entropy. We extend Krieger's theorem to include toral automorphisms, and more generally, any topological dynamical system on a compact metric space that satisfies almost weak specification, asymptotic entropy expansiveness, and the small boundary property. As a corollary, one obtains a complete solution to a natural generalization of an open problem in Halmos's 1956 book regarding an isomorphism invariant that he proposed.