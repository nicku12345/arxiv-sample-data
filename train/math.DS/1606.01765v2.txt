A classical construction due to Newhouse creates horseshoes from hyperbolic periodic orbits with large period and weak domination through local C^1-perturbations. Our main theorem shows that, when one works in the C^1 topology, the entropy of such horseshoes can be made arbitrarily close to an upper bound deriving from Ruelle's inequality, i.e., the sum of the positive Lyapunov exponents (or the same for the inverse diffeomorphism, whichever is smaller). Adapting classical techniques, we use perturbations that are local and can be chosen to preserve volume or symplectic form or a homoclinic connection.   This optimal entropy creation yields a number of consequences for C^1-generic diffeomorphisms, especially in the absence of a dominated splitting. For instance, in the conservative settings, we find formulas for the topological entropy, deduce that the topological entropy is continuous but not locally constant at the generic diffeomorphism and we prove that these generic diffeomorphisms have no measure of maximum entropy. In the dissipative setting, we show the locally generic existence of infinitely many homoclinic classes with entropy bounded away from zero.