The functional equation f(p(z))=g(q(z)) is studied, where p,q are polynomials and f,g are trancendental meromorphic functions in C. We find all the pairs p,q for which there exist nonconstant f,g satisfying our equation and there exist no rational f,g with this property. In fact, a more general problem is solved. In addition to algebraic methods, some results from local analytic dynamics are used.