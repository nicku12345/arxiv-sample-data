Let \Gamma be a doubling graph satisfying some pointwise subgaussian estimates of the Markov kernel. We introduce a space H^1(\Gamma) of functions and a space H^1(T_\Gamma) of 1-forms and give various characterizations of them. We prove the H^1-boundedness of the Riesz transform, from which we deduce the L^p boundedness of the Riesz transform for any p\in (1,2). In a previous work, we showed a H^1_w-boundedness of the Riesz transform under weaker assumptions, but the L^p boundedness was not established.