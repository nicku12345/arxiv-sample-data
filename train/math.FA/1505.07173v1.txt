We define functions of noncommuting self-adjoint operators with the help of double operator integrals. We are studying the problem to find conditions on a function f on {\Bbb R}^2, for which the map (A,B)\mapsto f(A,B) is Lipschitz in the operator norm and in Schatten--von Neumann norms \boldsymbol{S}_p. It turns out that for functions f in the Besov class B_{\infty,1}^1({\Bbb R}^2), the above map is Lipschitz in the \boldsymbol{S}_p norm for p\in[1,2]. However, it is not Lipschitz in the operator norm, nor in the \boldsymbol{S}_p norm for p>2. The main tool is triple operator integrals. To obtain the results, we introduce new Haagerup-like tensor products of L^\infty spaces and obtain Schatten--von Neumann norm estimates of triple operator integrals. We also obtain similar results for functions of noncommuting unitary operators.