We study M-ideals of compact operators by means of the property~(M) introduced in \cite{Kal-M}. Our main result states for a separable Banach space X that the space of compact operators on X is an M-ideal in the space of bounded operators if (and only if) X does not contain a copy of \ell_{1}, has the metric compact approximation property, and has property~(M). The investigation of special versions of property~(M) leads to results on almost isometric structure of some classes of Banach spaces. For instance, we give a simple necessary and sufficient condition for a Banach space to embed almost isometrically into an \ell_{p}-sum of finite-dimensional spaces resp.\ into c_{0}, and for 2<p<\iy we prove that a subspace of L_{p} embeds almost isometrically into \ell_{p} if and only if it does not contain a subspace isomorphic to \ell_{2}.