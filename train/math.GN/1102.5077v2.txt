According to Comfort, Raczkowski and Trigos-Arrieta, a dense subgroup D of a compact abelian group G determines G if the restriction homomorphism G^ --> D^ of the dual groups is a topological isomorphism. We introduce four conditions on D that are necessary for it to determine G and we resolve the following question: If one of these conditions holds for every dense (or G_\delta-dense) subgroup D of G, must G be metrizable? In particular, we prove (in ZFC) that a compact abelian group determined by all its G_\delta-dense subgroups is metrizable, thereby resolving a question by Hernandez, Macario and Trigos-Arrieta. (Under the additional assumption of the Continuum Hypothesis CH, the same statement was proved recently by Bruguera, Chasco, Dominguez, Tkachenko and Trigos-Arrieta.) As a tool, we develop a machinery for building G_\delta-dense subgroups without uncountable compact subsets in compact groups of weight \omega_1 (in ZFC). The construction is delicate, as these subgroups must have non-trivial convergent sequences in some models of ZFC.