We consider finitely presented,residually finite groups G and finitely generated normal subgroups A such that the inclusion A\hookrightarrow G induces an isomorphism from the profinite completion of A to a direct factor of the profinite completion of G. We explain why A need not be a direct factor of a subgroup of finite index in G; indeed G need not have a subgroup of finite index that splits as a non-trivial direct product. We prove that there is no algorithm that can determine whether A is a direct factor of a subgroup of finite index in G.