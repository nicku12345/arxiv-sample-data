Stallings folding theory is modified, using double coset representatives, and to applied to the study of subgroups of amalgamated products of finite rank free groups. As a first application the subgroup membership problem for such groups is shown to be decidable. An algorithm for this problem is constructed and its complexity is analysed. Groups in this class are also shown to possess the Howson property.