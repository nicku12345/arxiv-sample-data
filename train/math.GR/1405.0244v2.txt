Let C be a class of groups. We give sufficient conditions ensuring that a free product of residually C groups is again residually C, and analogous conditions are given for locally embeddable into C groups. As a corollary, we obtain that the class of residually amenable groups and the one of LEA groups (or initially subamenable groups in the terminology of Gromov) are closed under taking free products. Moreover, we consider the pro-C topology and we characterize special HNN extensions and amalgamated free products that are residually C, where C is a suitable class of groups. In this way, we describe special HNN extensions and amalgamated free products that are residually amenable.