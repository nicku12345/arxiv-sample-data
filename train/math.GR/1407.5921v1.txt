Let G be a finite p-group of order p^5, where p is a prime. We give necessary and sufficient conditions on G such that G has a non-inner class-preserving automorphism. As a consequence, we give short and alternate proofs of results of section 5 of Yadav [Proc. Indian Acad. Sci. (Math. Sci.) 118 (2008), 1-11] and Theorem 4.2 of Kalra and Gumber [Indian J. Pure Appl. Math. 44 (2013), 711-725].