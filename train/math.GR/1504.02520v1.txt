We calculate the rank and idempotent rank of the semigroup E(X,P) generated by the idempotents of the semigroup T(X,P), which consists of all transformations of the finite set X preserving a non-uniform partition P. We also classify and enumerate the idempotent generating sets of this minimal possible size. This extends results of the first two authors in the uniform case.