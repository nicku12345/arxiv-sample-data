We construct `structure invariants' of a one-ended, finitely presented group that describe the way in which the factors of its JSJ decomposition over two-ended subgroups fit together.   For groups satisfying two technical conditions, these invariants reduce the problem of quasi-isometry classification of such groups to the problem of relative quasi-isometry classification of the factors of their JSJ decompositions. The first condition is that their JSJ decompositions have two-ended cylinder stabilizers. The second is that every factor in their JSJ decompositions is either `relatively rigid' or `hanging'. Hyperbolic groups always satisfy the first condition, and it is an open question whether they always satisfy the second.   The same methods also produce invariants that reduce the problem of classification of one-ended hyperbolic groups up to homeomorphism of their Gromov boundaries to the problem of classification of the factors of their JSJ decompositions up to relative boundary homeomorphism type.