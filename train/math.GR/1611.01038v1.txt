We classify all non-collapsing Curtis-Tits and Phan amalgams with 3-spherical diagram over all fields. In particular, we show that amalgams with spherical diagram are unique, a result required by the classification of finite simple groups. We give a simple condition on the amalgam which is necessary and sufficient for it to arise from a group of Kac-Moody type. This also yields a definition of a large class of groups of Kac-Moody type in terms of a finite presentation.