We propose a generalisation of the congruence subgroup problem for groups acting on rooted trees. Instead of only comparing the profinite completion to that given by level stabilizers, we also compare pro-\mathcal{C} completions of the group, where \mathcal{C} is a pseudo-variety of finite groups. A group acting on a rooted, locally finite tree has the \mathcal{C}-congruence subgroup property (\mathcal{C}-CSP) if its pro-\mathcal{C} completion coincides with the completion with respect to level stabilizers. We give a sufficient condition for a weakly regular branch group to have the \mathcal{C}-CSP. In the case where \mathcal{C} is also closed under extensions (for instance the class of all finite p-groups for some prime p), our sufficient condition is also necessary. We apply the criterion to show that the Basilica group and the GGS-groups with constant defining vector (odd prime relatives of the Basilica group) have the p-CSP.