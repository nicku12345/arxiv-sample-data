We make a detailed study of the Heegaard Floer homology of the product of a closed surface Sigma_g of genus g with S^1. We determine HF^+ for this 3-manifold completely for the spin^c structure having trivial first Chern class, which for g>2 was previously unknown. We show that in this case HF^\infty is closely related to the cohomology of the total space of a certain circle bundle over the Jacobian torus of Sigma_g, and furthermore that HF^+ of a surface times a circle with integral coefficients contains nontrivial 2-torsion whenever g>2. This is the first example known to the authors of torsion in Heegaard Floer homology with integral coefficients. Our methods also give new information on the action of H_1 of a surface times the circle on HF^+ of the same with spin^c-structures with nonzero first Chern class.