Ozsv\'ath and Szab\'o conjectured that knot Floer homology detects fibred knots in S^3. We will prove this conjecture for null-homologous knots in arbitrary closed 3--manifolds. Namely, if K is a knot in a closed 3--manifold Y, Y-K is irreducible, and \hat{HFK}(Y,K) is monic, then K is fibred. The proof relies on previous works due to Gabai, Ozsv\'ath--Szab\'o, Ghiggini and the author. A corollary is that if a knot in S^3 admits a lens space surgery, then the knot is fibred.