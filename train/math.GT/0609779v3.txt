Sutured Floer homology, denoted by SFH, is an invariant of balanced sutured manifolds previously defined by the author. In this paper we give a formula that shows how this invariant changes under surface decompositions. In particular, if (M, \gamma)--> (M', \gamma') is a sutured manifold decomposition then SFH(M',\gamma') is a direct summand of SFH(M, \gamma). To prove the decomposition formula we give an algorithm that computes SFH(M,\gamma) from a balanced diagram defining (M,\gamma) that generalizes the algorithm of Sarkar and Wang.   As a corollary we obtain that if (M, \gamma) is taut then SFH(M,\gamma) is non-zero. Other applications include simple proofs of a result of Ozsvath and Szabo that link Floer homology detects the Thurston norm, and a theorem of Ni that knot Floer homology detects fibred knots. Our proofs do not make use of any contact geometry.   Moreover, using these methods we show that if K is a genus g knot in a rational homology 3-sphere Y whose Alexander polynomial has leading coefficient a_g non-zero and if the rank of \hat{HFK}(Y,K,g) < 4 then the knot complement admits a depth < 2 taut foliation transversal to the boundary of N(K).