We give a criterion in terms of the boundary for the existence of a proper cocompact action of a word-hyperbolic group on a CAT(0) cube complex. We describe applications towards lattices and hyperbolic 3-manifold groups. In particular, by combining the theory of special cube complexes, the surface subgroup result of Kahn-Markovic, and Agol's criterion, we find that every subgroup separable closed hyperbolic 3-manifold is virtually fibered.