Combinatorial aspects of the Torelli-Johnson-Morita theory of surface automorphisms are extended to certain subgroups of the mapping class groups. These subgroups are defined relative to a specified homomorphism from the fundamental group of the surface onto an arbitrary group K. For K abelian, there is a combinatorial theory akin to the classical case, for example, providing an explicit cocycle representing the first Johnson homomophism with target \Lambda ^3 K. Furthermore, the Earle class with coefficients in K is represented by an explicit cocyle.