We construct graph-valued analogues of the Kuperberg sl(3) and G2 invariants for virtual knots. The restriction of the sl(3) or G2 invariants for classical knots coincides with the usual Homflypt sl(3) invariant and G2 invariants. For virtual knots and graphs these invariants provide new graphical information that allows one to prove minimality theorems and to construct new invariants for free knots (unoriented and unlabeled Gauss codes taken up to abstract Reidemeister moves). A novel feature of this approach is that some knots are of sufficient complexity that they evaluate themselves in the sense that the invariant is the knot itself seen as a combinatorial structure. The paper generalizes these structures to virtual braids and discusses the relationship with the original Penrose bracket for graph colorings.