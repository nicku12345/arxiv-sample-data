We write down an explicit formula for the + version of the Heegaard Floer homology (as an absolutely graded vector space over an arbitrary field) of the results of Dehn surgery on a knot K in S^3 in terms of homological data derived from CFK^{\infty}(K). This allows us to prove some results about Dehn surgery on knots in S^3. In particular, we show that for a fixed manifold there are only finitely many alternating knots that can produce it by surgery. This is an improvement on a recent result by Lackenby and Purcell. We also derive a lower bound on the genus of knots depending on the manifold they give by surgery. Some new restrictions on Seifert fibred surgery are also presented.