The cosmetic crossing conjecture (also known as the "nugatory crossing conjecture") asserts that the only crossing changes that preserve the oriented isotopy class of a knot in the 3-sphere are nugatory. We use the Dehn surgery characterization of the unknot to prove this conjecture for knots in integer homology spheres whose branched double covers are L-spaces satisfying a homological condition. This includes as a special case all alternating and quasi-alternating knots with square-free determinant. As an application, we prove the cosmetic crossing conjecture holds for all knots with at most nine crossings and provide new examples of knots, including pretzel knots, non-arborescent knots and symmetric unions for which the conjecture holds.