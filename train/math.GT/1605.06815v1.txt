In his famous Princeton Notes, Thurston introduced the so-called gluing equations defining the deformation variety. Later, Kashaev defined a non-commutative ring from H-triangulations of 3-manifolds and observed that for trefoil and figure-eight knot complements the abelianization of this ring is isomorphic to the ring of regular functions on the deformation variety, \cite{Kashaev-definition_delta_groupoid, def_anneau, Kashaev-Delta-groupoids_and_ideal_triangulations}. In this paper, we prove that this is true for any knot complement in a homology sphere. We also analyse some examples on other manifolds.