A families index theorem in K-theory is given for the setting of Atiyah, Patodi and Singer of a family of Dirac operators with spectral boundary condition. This result is deduced from such a K-theory index theorem for the calculus of cusp, or more generally fibred cusp, pseudodifferential operators on the fibres (with boundary) of a fibration; a version of Poincare duality is also shown in this setting, identifying the stable Fredholm families with elements of a bivariant K-group.