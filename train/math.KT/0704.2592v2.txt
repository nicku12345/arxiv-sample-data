Topological T-duality is a transformation taking a gerbe on a principal torus bundle to a gerbe on a principal dual-torus bundle. We give a new geometric construction of T-dualization, which allows the duality to be extended in following two directions. First, bundles of groups other than tori, even bundles of some nonabelian groups, can be dualized. Second, bundles whose duals are families of noncommutative groups (in the sense of noncommutative geometry) can be treated, though in this case the base space of the bundles is best viewed as a topological stack.   Some methods developed for the construction may be of independent interest. These are a Pontryagin type duality that interchanges commutative principal bundles with gerbes, a nonabelian Takai type duality for groupoids, and the computation of certain equivariant Brauer groups.