For a proper, cocompact action by a locally compact group of the form H \times G, with H compact, we define an H \times G-equivariant index of H-transversally elliptic operators, which takes values in KK_*(C^*H, C^*G). This simultaneously generalises the Baum--Connes analytic assembly map, Atiyah's index of transversally elliptic operators, and Kawasaki's orbifold index. This index also generalises the assembly map to elliptic operators on orbifolds. In the special case where the manifold in question is a real semisimple Lie group, G is a cocompact lattice and H is a maximal compact subgroup, we realise the Dirac induction map from the Connes--Kasparov conjecture as a Kasparov product and obtain an index theorem for Spin-Dirac operators on compact locally symmetric spaces.