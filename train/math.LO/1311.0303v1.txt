Suppose \kappa is \lambda-supercompact witnessed by an elementary embedding j:V\rightarrow M with critical point \kappa, and further suppose that F is a function from the class of regular cardinals to the class of cardinals satisfying the requirements of Easton's theorem: (1) \forall\alpha \alpha<\textrm{cf}(F(\alpha)) and (2) \alpha<\beta \Longrightarrow F(\alpha)\leq F(\beta). In this article we address the question: assuming GCH, what additional assumptions are necessary on j and F if one wants to be able to force the continuum function to agree with F globally, while preserving the \lambda-supercompactness of \kappa?   We show that, assuming GCH, if F is any function as above, and in addition for some regular cardinal \lambda>\kappa there is an elementary embedding j:V\rightarrow M with critical point \kappa such that \kappa is closed under F, the model M is closed under \lambda-sequences, H(F(\lambda))\subseteq M, and for each regular cardinal \gamma\leq \lambda one has (|j(F)(\gamma)|=F(\gamma))^V, then there is a cardinal-preserving forcing extension in which 2^\delta=F(\delta) for every regular cardinal \delta and \kappa remains \lambda-supercompact. This answers a question of B. Cody, M. Magidor, On supercompactness and the continuum function, Ann. Pure Appl. Logic, (2013).