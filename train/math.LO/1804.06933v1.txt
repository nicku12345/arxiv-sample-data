In this paper we introduce and study a variety of algebras that properly includes integral distributive commutative residuated lattices and weak Heyting algebras. Our main goal is to give a characterization of the principal congruences in this variety. We apply this description in order to study compatible functions.