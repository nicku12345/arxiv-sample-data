We investigate connections between potential theories on a Ahlfors-regular metric space X, on a graph G associated with X, and on the tree T obtained by removing the "horizontal edges" in G. Applications to the calculation of set capacity are given.