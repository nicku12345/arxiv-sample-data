We present a preconditioning method for the multi-dimensional Helmholtz equation with smoothly varying coefficient. The method is based on a frame of functions, that approximately separates components associated with different singular values of the operator. For the small singular values, corresponding to propagating waves, the frame functions are constructed using ray theory. A series of 2-D numerical experiments demonstrates that the number of iterations required for convergence is small and independent of the frequency. In this sense the method is optimal.