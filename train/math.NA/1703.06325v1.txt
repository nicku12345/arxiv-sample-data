We define a generalized finite element method for the discretization of elliptic partial differential equations in heterogeneous media. An adaptive local finite element basis (AL basis) on a coarse mesh which does not resolve the matrix of the media is constructed by solving finite-dimensional localized problems. The method requires O(log(1/H)^{d+1}) basis functions per mesh point. We prove that the optimal finite element convergence rates are preserved.