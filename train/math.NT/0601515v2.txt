We prove a modularity lifting theorem for potentially Barostti-Tate representations over totally real fields, generalising recent results of Kisin. Unfortunately, there was an error in the original version of this paper, meaning that we can only obtain a slightly weaker result in the case where the representations are potentially ordinary; an erratum has been added explaining this error.