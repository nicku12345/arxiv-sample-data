Let F be a totally real field and p an odd prime. If r is a continuous, semisimple, totally odd mod p representation of the absolute Galois group of F which is tamely ramified at all places of F dividing p, then we formulate a conjecture specifying the weights for which r is modular. This extends the conjecture of Diamond, Buzzard, and Jarvis, which supposed that p was unramified in F. We also prove a theorem towards the conjecture and provide some computational evidence.