Let d,n be positive integers and S be an arbitrary set of positive integers. We say that d is an S-divisor of n if d|n and gcd (d,n/d)\in S. Consider the S-convolution of arithmetical functions given by (1.1), where the sum is extended over the S-divisors of n.   We determine the sets S such that the S-convolution is associative and preserves the multiplicativity of functions, respectively, and discuss other basic properties of it. We give asymptotic formulae with error terms for the functions \sigma_S(n) and \tau_S(n), representing the sum and the number of S-divisors of n, respectively, for an arbitrary S. We improve the remainder terms of these formulae and find the maximal orders of \sigma_S(n) and \tau_S(n) assuming additional properties of S. These results generalize, unify and sharpen previous ones.   We also pose some problems concerning these topics.