We present algorithms which, given a genus 2 curve C defined over a finite field and a quartic CM field K, determine whether the endomorphism ring of the Jacobian J of C is the full ring of integers in K. In particular, we present probabilistic algorithms for computing the field of definition of, and the action of Frobenius on, the subgroups J[\ell^d] for prime powers \ell^d. We use these algorithms to create the first implementation of Eisentr\"ager and Lauter's algorithm for computing Igusa class polynomials via the Chinese Remainder Theorem \cite{el}, and we demonstrate the algorithm for a few small examples. We observe that in practice the running time of the CRT algorithm is dominated not by the endomorphism ring computation but rather by the need to compute p^3 curves for many small primes p.