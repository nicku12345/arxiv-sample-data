In 1984, G. Robin proved that the Riemann hypothesis is true if and only if the Robin inequality \sigma(n)<e^\gamma n\log\log n holds for every integer n>5040, where \sigma(n) is the sum of divisors function, and \gamma is the Euler-Mascheroni constant. We exhibit a broad class of subsets \cS of the natural numbers such that the Robin inequality holds for all but finitely many n\in\cS. As a special case, we determine the finitely many numbers of the form n=a^2+b^2 that do not satisfy the Robin inequality. In fact, we prove our assertions with the Nicolas inequality n/\phi(n)<e^{\gamma}\log \log n; since \sigma(n)/n<n/\phi(n) for n>1 our results for the Robin inequality follow at once.