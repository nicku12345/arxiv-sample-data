Let p be a prime number. It is not known if every finite p-group of rank n>1 can be realized as a Galois group over Q with no more than n ramified primes. We prove that this can be done for the family of finite p-groups which contains all the cyclic groups of p-power order, and is closed under direct products, wreath products, and rank preserving homomorphic images. This family contains the Sylow p-subgroups of the symmetric groups and of the classical groups over finite fields of characteristic not p. On the other hand, it does not contain all finite p-groups.