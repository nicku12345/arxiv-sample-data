We investigate the period function of \sum_{n=1}^\infty\sigma_a(n)\e{nz}, showing it can be analytically continued to |\arg z|<\pi and studying its Taylor series. We use these results to give a simple proof of the Voronoi formula and to prove an exact formula for the second moments of the Riemann zeta function. Moreover, we introduce a family of cotangent sums, functions defined over the rationals, that generalize the Dedekind sum and share with it the property of satisfying a reciprocity formula. In particular, we find a reciprocity formula for the Vasyunin sum.