Let M be a B-probability space. Assume that B itself is a D-probability space; then M can be viewed as a D-probability space as well. Let X be in M. We characterize freeness of X from B with amalgamation over D in terms of a certain factorization condition linking the B-valued and D-valued R-transforms of X. We give an application to random matrices.