We consider the higher-rank graphs introduced by Kumjian and Pask as models for higher-rank Cuntz-Krieger algebras. We describe a variant of the Cuntz-Krieger relations which applies to graphs with sources, and describe a local convexity condition which characterises the higher-rank graphs that admit a nontrivial Cuntz-Krieger family. We then prove versions of the uniqueness theorems and classifications of ideals for the C*-algebras generated by Cuntz-Krieger families.