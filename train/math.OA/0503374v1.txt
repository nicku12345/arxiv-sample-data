We describe a class of C^*-algebras which simultaneously generalise the ultragraph algebras of Tomforde and the shift space C^*-algebras of Matsumoto. In doing so we shed some new light on the different C^*-algebras that may be associated to a shift space. Finally, we show how to associate a simple C^*-algebra to an irreducible sofic shift.