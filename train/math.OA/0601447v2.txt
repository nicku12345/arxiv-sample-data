We study L^2-Betti numbers for von Neumann algebras, as defined by D. Shlyakhtenko and A. Connes. We give a definition of L^2-cohomology and show how the study of the first L^2-Betti number can be related with the study of derivations with values in a bi-module of affiliated operators. We show several results about the possibility of extending derivations from sub-algebras and about uniqueness of such extensions. Along the way, we prove some results about the dimension function of modules over rings of affiliated operators which are of independent interest.