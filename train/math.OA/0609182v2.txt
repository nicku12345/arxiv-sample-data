We prove that the Cuntz semigroup is recovered functorially from the Elliott invariant for a large class of C*-algebras. In particular, our results apply to the largest class of simple C*-algebras for which K-theoretic classification can be hoped for. This work has three significant consequences. First, it provides new conceptual insight into Elliott's classification program, proving that the usual form of the Elliott conjecture is equivalent, among Z-stable algebras, to a conjecture which is in general substantially weaker and for which there are no known counterexamples. Second and third, it resolves, for the class of algebras above, two conjectures of Blackadar and Handelman concerning the basic structure of dimension functions on C*-algebras. We also prove in passing that the Cuntz-Pedersen semigroup is recovered functorially from the Elliott invariant for a large class of unital simple C*-algebras.