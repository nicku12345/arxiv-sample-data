It is known that the classical Hilbert--Schmidt theorem can be generalized to the case of compact operators in Hilbert A-modules H_A^* over a W^*-algebra of finite type, i.e. compact operators in H_A^* under slight restrictions can be diagonalized over A. We show that if B is a weakly dense C^*-subalgebra of real rank zero in A with some additional property then the natural extension of a compact operator from H_B to H_A^*\supset H_B can be diagonalized with diagonal entries being from the C^*-algebra B.