For a von Neumann algebra M on a Hilbert space, A. Connes has constructed a module S and a derivation of M into S, such that M is approximately finite dimensional if and only if that derivation is inner. The paper contains a generalization of this result to the situation with a 2-cocycle instead. The cocycle is the obvious generalization, and the module is closely related to Connes, but isn't a dual module.