Suppose a C*-algebra A acts by adjointable operators on a Hilbert A-module X. Pimsner constructed a C*-algebra O_X which includes, for particular choices of X, crossed products of A by Z, the Cuntz algebras O_n, and the Cuntz-Krieger algebras O_B. Here we analyse the representations of the corresponding Toeplitz algebra. One consequence is a uniqueness theorem for the Toeplitz-Cuntz-Krieger algebras of directed graphs, which includes Cuntz's uniqueness theorem for O_\infty.