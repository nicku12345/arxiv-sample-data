Given a labeling c of the edges of a directed graph E by elements of a discrete group G, one can form a skew-product graph E cross_c G. We show, using the universal properties of the various constructions involved, that there is a coaction delta of G on C*(E) such that C*(E cross_c G) is isomorphic to the crossed product C*(E) cross_delta G. This isomorphism is equivariant for the dual action deltahat and a natural action gamma of G on C*(E cross_c G); following results of Kumjian and Pask, we show that C*(E cross_c G) cross_gamma G is isomorphic to C*(E cross_c G) cross_{gamma,r} G, which in turn is isomorphic to C*(E) tensor K(l^2(G)), and it turns out that the action gamma is always amenable. We also obtain corresponding results for r-discrete groupoids Q and continuous homomorphisms c: Q -> G, provided Q is amenable. Some of these hold under a more general technical condition which obtains whenever Q is amenable or second-countable.