In this paper we use an affine connection formulation to study an optimal control problem for a class of nonholonomic, under-actuated mechanical systems. In particular, we aim at minimizing the norm-squared of the control input to move the system from an initial to a terminal state. We consider systems evolving on general manifolds. The class of nonholonomic systems we study in this paper includes, in particular, wheeled-type vehicles, which are important for many robotic locomotion systems. The two special aspects of this optimal control problem are the nonholonomic constraints and under-actuation. Nonholonomic constraints restrict the evolution of the system to a distribution on the manifold. The nonholonomic connection is used to express the constrained equations of motion. Furthermore, it is used to take variations of the cost functional. Many robotic systems are under-actuated since control inputs are usually applied through the robot's internal configuration space only. While we do not consider symmetries with respect to group actions in this paper, the fact that the system is under-actuated is taken into account in our problem formulation. This allows one to compute reaction forces due to any inputs applied in directions orthogonal to the constraint distribution. We illustrate our ideas by considering a simple example on a three-dimensional manifold.