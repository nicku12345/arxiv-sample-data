In the classical Monge-Kantorovich problem, the transportation cost only depends on the amount of mass sent from sources to destinations and not on the paths followed by this mass. Thus, it does not allow for congestion effects. Using the notion of traffic intensity, we propose a variant taking into account congestion. This leads to an optimization problem posed on a set of probability measures on a suitable paths space. We establish existence of minimizers and give a characterization. As an application, we obtain existence and variational characterization of equilibria of Wardrop type in a continuous space setting.