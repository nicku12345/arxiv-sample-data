This paper presents a generalization to image matching of the Hamiltonian approach for planar curve matching developed in the context of group of diffeomorphisms. We propose an efficient framework to deal with discontinuous images in any dimension, for example 2D or 3D. In this context, we give the structure of the initial momentum (which happens to be decomposed in a smooth part and a singular part) thanks to a derivation lemma interesting in itself. The second part develops a Hamiltonian interpretation of the variational problem, derived from the optimal control theory point of view.