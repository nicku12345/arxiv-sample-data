We study the optimal transport problem in sub-Riemannian manifolds where the cost function is given by the square of the sub-Riemannian distance. Under appropriate assumptions, we generalize Brenier-McCann's Theorem proving existence and uniqueness of the optimal transport map. We show the absolute continuity property of Wassertein geodesics, and we address the regularity issue of the optimal map. In particular, we are able to show its approximate differentiability a.e. in the Heisenberg group (and under some weak assumptions on the measures the differentiability a.e.), which allows to write a weak form of the Monge-Amp\`ere equation.