We study optimal risk sharing among n agents endowed with distortion risk measures. Our model includes market frictions that can either represent linear transaction costs or risk premia charged by a clearing house for the agents. Risk sharing under third-party constraints is also considered. We obtain an explicit formula for Pareto optimal allocations. In particular, we find that a stop-loss or deductible risk sharing is optimal in the case of two agents and several common distortion functions. This extends recent result of Jouini et al. (2006) to the problem with unbounded risks and market frictions.