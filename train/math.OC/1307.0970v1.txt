Railway scheduling and timetabling are common stages in the classical hierarchical railway planning process and they perhaps represent the step with major influence on user's perception about quality of service. This aspect, in conjunction with their contribution to service profitability, makes them a widely studied topic in the literature, where nowadays many efforts are focused on improving the solving methods of the corresponding optimization problems. However, literature about models considering detailed descriptions of passenger demand is sparse. This paper tackles the problem of timetable determination by means of building and solving a non-linear integer programming model which fits the arrival and departure train times to a dynamic behavior of demand. The optimization model results are then used for computing several measures to characterize the quality of the obtained timetables considering jointly both user and company points of view. Some aspects are discussed, including the influence of train capacity and the validity of Random Incidence Theorem. An application to the C5 line of Madrid rapid transit system is presented. Different measures are analyzed in order to improve the insight into the proposed model and analyze in advance the influence of different objectives on the resulting timetable.