We consider an optimization problem in a given region Q where an agent has to decide the price p(x) of a product for every x\in Q. The customers know the pricing pattern p and may shop at any place y, paying the cost p(y) and additionally a transportation cost c(x,y) for a given transportation cost function c. We will study two models: the first one where the agent operates everywhere on Q and a second one where the agent operates only in a subregion. For both models we discuss the mathematical framework and we obtain an existence result for a pricing strategy which maximizes the total profit of the agent. We also present some particular cases where more detailed computations can be made, as the case of concave costs, the case of quadratic cost, and the onedimensional case. Finally we discuss possible extensions and developments, as for instance the case of Nash equilibria when more agents operate on the same market.