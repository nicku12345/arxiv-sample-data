In this paper we use a dynamic programming approach to analytically solve an endogenous growth model with internal habits where the key parameters describing their formation, namely the intensity, persistence and lag structure (or memory), are kept generic. Then we show that external and internal habits lead to the same closed loop policy function and then to the same (Pareto) optimal equilibrium path of the aggregate variables when the utility function is subtractive nonseparable. The paper uses new theoretical results from those previously developed by the dynamic programming literature applied to optimal control problems with delay and it extends the existing results on the equivalence between models with internal and external habits to the case of finite memory.