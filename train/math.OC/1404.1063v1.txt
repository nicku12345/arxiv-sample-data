This work is devoted to the study of optimal control of stochastic functional differential equations (SFDEs) and its application to mathematical finance. By using the Dynkin formula and solution of the Dirichlet-Poisson problem, the Hamilton-Jacobi-Bellman (HJB) equation and the converse HJB equation are derived. Furthermore, applications are given to an optimal portfolio selection problem.