We define a model of a system that deteriorate as a result of (i) shocks, modeled as a compound Poisson process and (ii) deterministic, state dependent progressive rate, with variable and fixed maintenance cost. We define maintenance strategies based on an impulse control model where time and size of interventions are executed according the the system state, which is obtained from permanent monitoring. We characterize the value function as the unique viscosity solution of the HJB equation and prove that a (\underline{s},\overline{s},S) policy is optimal. We also provide numerical examples. Finally, a singular control problem is proposed when there is no fixed cost, which study and relation with the former problem is open for future discussion.