We present a general numerical approach to shape optimization with state constraints for 2-dimensional geometries, without relaxing the constraints. To do this we reformulate the problem on a fixed reference domain using a conformal pull-back. The shape dependence is then hidden in a conformal parameter, which appears as a coefficient in the differential operators. The problem on the reference domain can be discretized, leading to an NLP which can be handled using existing solvers. Furthermore, we deal with the question how constraints on the conformal parameter can be used to preserve characteristic features of the geometry. We introduce this approach with the help of a Stokes flow, where the task is finding a shape such that the wall shear stress is uniformly close to some given target.