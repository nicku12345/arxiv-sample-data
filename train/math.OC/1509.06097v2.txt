In this work we study for the first time the interaction between marketing and network effects. We build a model in which the online firm starts with an initial user base and controls the growth of the user base by choosing the intensity of advertisements and referrals to potential users. A large user base provides more profits to the online firm, but building a large user base through advertisements and referrals is costly; therefore, the optimal policy must balance the marginal benefits of adding users against the marginal costs of sending advertisements and referrals. Our work offers three main insights: (1) The optimal policy prescribes that a new online firm should offer many advertisements and referrals initially, but then it should decrease advertisements and referrals over time. (2) If the network effects decrease, then the change in the optimal policy depends heavily on two factors i) the level of patience of the online firm, where patient online firms are oriented towards long term profits and impatient online firms are oriented towards short term profits and, ii) the size of the user base. If the online firm is very patient (impatient) and if the network effects decrease, then the optimal policy prescribes it to be more (less) aggressive in posting advertisements and referrals at low user base levels and less (more) aggressive in posting advertisements and referrals at high user base levels. (3) The change in the optimal policy when network effects decrease also depends heavily on the heterogeneity in the user base, as measured in terms of the revenue generated by each user. An online firm that generates most of its revenue from a core group of users should be more aggressive and protective of its user base than a firm that generates revenue uniformly from its users.