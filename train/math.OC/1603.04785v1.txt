We study an optimal control problem for traffic regulation via variable speed limit. The traffic flow dynamics is described with the Lighthill-Whitham-Richards (LWR) model with Newell-Daganzo flux function. We aim at minimizing the L^2 quadratic error to a desired outflow, given an inflow on a single road. We first provide existence of a minimizer and compute analytically the cost functional variations due to needle-like variation in the control policy. Then, we compare three strategies: instantaneous policy; random exploration of control space; steepest descent using numerical expression of gradient. We show that the gradient technique is able to achieve a cost within 10% of random exploration minimum with better computational performances.