Real-time estimations of temperature distributions and geometric configurations are important to energy efficient buildings and the development of smarter cities. In this paper we formulate a gradient-based estimation algorithm capable of reconstructing the states of doors in a building, as well as its temperature distribution, based on a floor plan and a set of thermostats. Our algorithm solves in real time a convection-diffusion Computer Fluid Dynamics (CFD) model for the air flow in the building as a function of its geometric configuration. We formulate the estimation algorithm as an optimization problem, and we solve it by computing the adjoint equations of our CFD model, which we then use to obtain the gradients of the cost function with respect to the flow's temperature and door states. We evaluate the performance of our method using simulations of a real apartment in the St. Louis area. Our results show that the estimation method is both efficient and accurate, establishing its potential for the design of smarter control schemes in the operation of high-performance buildings.