In this paper, we consider a constrained stochastic linear-quadratic (LQ) optimal control problem where the control is constrained in a closed cone. The state process is governed by a controlled SDE with random coefficients. Moreover, there is a random jump of the state process. In mathematical finance, the random jump often represents the default of a counter party. Thanks to the It\^o-Tanaka formula, optimal control and optimal value can be obtained by solutions of a system of backward stochastic differential equations (BSDEs). The solvability of the BSDEs is obtained by solving a recursive system of BSDEs driven by the Brownian motions. We also apply the result to the mean variance portfolio selection problem in which the stock price can be affected by the default of a counterparty.