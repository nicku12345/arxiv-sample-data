A smart grid connects wind or solar or storage farms, fossil fuel plants, industrialor commercial loads, or load serving entities, modeled as stochastic dynamical systems. In each time period, they consume or supply electrical energy, with the constraint that total generation equals consumption. Each agent's utility is either the benefit accrued from consumption, or negative of generation cost. The Independent System Operator has to maximize their sum, the social welfare, without agents revealing their dynamic models or utilities. It has to announce prices after interacting with agents via bids.   If agents observe and know the laws of uncertainties affecting other agents, then there is an iterative price and bid interaction that leads to the maximum social welfare attainable if agents pooled their information.   In the important case where agents are LQG systems not even knowing of the existence of other agents, the bid and price iteration is dramatically simple, exchanging time vectors of future prices and consumptions or generations at each time step. State dependent bidding is not needed. This solution of the decentralized stochastic control problem may be of economic importance in power systems, and of broader interest in general equilibrium theory of economics for stochastic dynamic agents.