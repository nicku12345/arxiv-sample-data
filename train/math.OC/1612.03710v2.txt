This paper presents a unification and a generalization of the small-gain theory subsuming a wide range of existing small-gain theorems. In particular, we introduce small-gain conditions that are necessary and sufficient to ensure input-to-state stability (ISS) with respect to closed sets. Toward this end, we first develop a Lyapunov characterization of \omegaISS via finite-step \omegaISS Lyapunov functions. Then, we provide the small-gain conditions to guarantee \omegaISS of a network of systems. Finally, applications of our results to partial input-to-state stability, ISS of time-varying systems, synchronization problems, incremental stability, and distributed observers are given.