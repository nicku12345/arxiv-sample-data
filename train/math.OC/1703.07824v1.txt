When providing frequency regulation in a pay-for-performance market, batteries need to carefully balance the trade-off between following regulation signals and their degradation costs in real-time. Existing battery control strategies either do not consider mismatch penalties in pay-for-performance markets, or cannot accurately account for battery cycle aging mechanism during operation. This paper derives an online control policy that minimizes a battery owner's operating cost for providing frequency regulation in a pay-for-performance market. The proposed policy considers an accurate electrochemical battery cycle aging model, and is applicable to most types of battery cells. It has a threshold structure, and achieves near-optimal performance with respect to an offline controller that has complete future information. We explicitly characterize this gap and show it is independent of the duration of operation. Simulation results with both synthetic and real regulation traces are conducted to illustrate the theoretical results.