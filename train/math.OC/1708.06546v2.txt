The emerging interest in deployment of renewable energy resources (RESs) in smart system represents a great challenge to both system planners and owners of Microgrids (MGs) operators. In this regard, we propose a Tri-level power market models for designing demand side management systems to match power supply and shape renewable power generations. We characterize the resulting equilibria in competitive as well as oligopolistic market, and propose distributed demand response algorithms to achieve the equilibria. The models serve as a starting point to include the appliance-level details and constraints for designing practical demand response schemes for smart power grids. In order to show the usefulness of proposed model, two various case studies are considered in this paper: uncoordinated and coordinated load demand. A novel mathematical model is further developed whereby the behavior of RES, in response to different electricity prices owing to demand response programs, is considered in generating the energy consumption of MGs.