Classification yards are crucial nodes of railway freight transportation network, which plays a vital role in car flow reclassification and new train formation. Generally, a modern yard covers an expanse of several square kilometers and costs billions of yuan, i.e., hundreds of millions of dollars. The determination of location and size of classification yards, which is a location-allocation problem with railway characteristics, is not only related to building or improving cost, but also involved with train connecting service (TCS) plan. This paper proposed a bi-level programming model for this problem. The upper-level is intended to find an optimal building or improving strategy for potential nodes, and the lower-level aims to obtain a least costly TCS plan considering reclassification cost and accumulation delay, when the building or improvement plan is given by the upper-level. The model is constrained by capital budget, classification capacity, the number of available tracks, etc.