This paper considers the network flow stabilization problem in power systems and adopts an output regulation viewpoint. Building upon the structure of a heterogeneous port-Hamiltonian model, we integrate network aspects and develop a systematic control design procedure. First, the passive output is selected to encode two objectives: consensus in angular velocity and constant excitation current. Second, the non-Euclidean nature of the angle variable reveals the geometry of a suitable target set, which is compact and attractive for the zero dynamics. On this set, circuit-theoretic aspects come into play, giving rise to a network potential function which relates the electrical circuit variables to the machine rotor angles. As it turns out, this energy function is convex in the edge variables, concave in the node variables and, most importantly, can be optimized via an intrinsic gradient flow, with its global minimum corresponding to angle synchronization. The third step consists of explicitly deriving the steady-state-inducing control action by further refining this sequence of control-invariant sets. Analogously to solving the so called regulator equations, we obtain an impedance-based network flow map leading to novel error coordinates and a shifted energy function. The final step amounts to decoupling the rotor current dynamics via feedback-linearziation resulting in a cascade which is used to construct an energy-based controller hierarchically.