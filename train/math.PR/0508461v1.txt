We study the asymptotic probability that a random walk with heavy-tailed increments crosses a high boundary on a random time interval. We use new techniques to extend results of Asmussen [Ann. Appl. Probab. 8 (1998) 354-374] to completely general stopping times, uniformity of convergence over all stopping times and a wide class of nonlinear boundaries. We also give some examples and counterexamples.