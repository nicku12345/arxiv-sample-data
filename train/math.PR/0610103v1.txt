This work introduces the extended Skorokhod problem (ESP) and associated extended Skorokhod map (ESM) that enable a pathwise construction of reflected diffusions that are not necessarily semimartingales. Roughly speaking, given the closure G of an open connected set in R^J, a non-empty convex cone d(x) in R^J, specified at each point x on the boundary of G, and a cadlag trajectory \psi taking values in R^J, the ESM defines a constrained version \phi of \psi that takes values in G and is such that the increments of \phi - \psi on any interval [s,t] lie in the closed convex hull of the directions d(\phi(u)), u in (s,t]. General deterministic properties of the ESP are first established under the only assumption that the graph of d(.) is closed. Next, for a class of multi-dimensional ESPs on polyhedral domains, pathwise uniqueness and existence of strong solutions to the associated stochastic differential equations is established. In addition, it is also proved that these reflected diffusions are semimartingales on [0,\tau_0], where \tau_0 is the time to hit the set of points x on the boundary for which d(x) contains a line. One motivation for the study of this class of reflected diffusions is that they arise as approximations of queueing networks in heavy traffic that use the so-called generalised processor sharing discipline.