We consider random variables of the form F=f(V_1,...,V_n), where f is a smooth function and V_i,i\in\mathbb{N}, are random variables with absolutely continuous law p_i(y) dy. We assume that p_i, i=1,...,n, are piecewise differentiable and we develop a differential calculus of Malliavin type based on \partial\ln p_i. This allows us to establish an integration by parts formula E(\partial_i\phi(F)G)=E(\phi(F)H_i(F,G)), where H_i(F,G) is a random variable constructed using the differential operators acting on F and G. We use this formula in order to give numerical algorithms for sensitivity computations in a model driven by a L\'{e}vy process.