In this paper, we study the asymptotic behavior of sums of functions of the increments of a given semimartingale, taken along a regular grid whose mesh goes to 0. The function of the ith increment may depend on the current time, and also on the past of the semimartingale before this time. We study the convergence in probability of two types of such sums, and we also give associated central limit theorems. This extends known results when the summands are a function depending only on the increments, and this is motivated mainly by statistical applications.