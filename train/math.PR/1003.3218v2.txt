We prove a hydrodynamic limit for the totally asymmetric simple exclusion process with spatially inhomogeneous jump rates given by a speed function that may admit discontinuities. The limiting density profiles are described with a variational formula. This formula enables us to compute explicit density profiles even though we have no information about the invariant distributions of the process. In the case of a two-phase flow for which a suitable p.d.e. theory has been developed we also observe that the limit profiles are entropy solutions of the corresponding scalar conservation law with a discontinuous speed function.