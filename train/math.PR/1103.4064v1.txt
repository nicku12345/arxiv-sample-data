A two-sided exit problem is solved for a difference of a compound Poisson process and a compound renewal process. More precisely, the Laplace transforms of the joint distribution of the first exit time, the value of the overshoot and the value of a linear component at this instant are found. Further, we study the process reflected in its supremum. We determine the main two-boundary characteristics of the process reflected in its supremum. These results are then applied for studying the  M^{\varkappa}|G^{\delta}|1|B system. We derive the distribution of a busy period and the numbers of customers in the system in transient and stationary regimes. The advantage is that these results are in a closed form, in terms of resolvent sequences of the process.