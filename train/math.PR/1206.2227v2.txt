We study the diffusive scaling limit for a chain of N coupled oscillators. In order to provide the system with good ergodic properties, we perturb the Hamiltonian dynamics with random flips of velocities, so that the energy is locally conserved. We derive the hydrodynamic equations by estimating the relative entropy with respect to the local equilibrium state modified by a correction term.