Let \Gamma be a finite subgroup of \SL_2(\C). We consider \Gamma-fixed point sets in Hilbert schemes of points on the affine plane \C^2. The direct sum of homology groups of components has a structure of a representation of the affine Lie algebra \ag corresponding to \Gamma. If we replace homology groups by equivariant K-homology groups, we get a representation of the quantum toroidal algebra \Ut. We also discuss a higher rank generalization and character formulas in terms of intersection homology groups.