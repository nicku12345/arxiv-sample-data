This paper is a sequel (and contains a better treatment) of math.QA/0404032; We construct some canonical bases for quantum toroidal algebras of types D_4, E_6, E_7, E_8 using perverse sheaves on quot schemes parametrizing equivariant coherent sheaves on elliptic curves. We also study some compatibility properties of these bases with some natural filtrations and modules.