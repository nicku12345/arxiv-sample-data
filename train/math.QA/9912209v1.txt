A soliton cellular automaton associated with crystals of symmetric tensor representations of the quantum affine algebra U'_q(A^{(1)}_M) is introduced. It is a crystal theoretic formulation of the generalized box-ball system in which capacities of boxes and carriers are arbitrary and inhomogeneous. Scattering matrices of two solitons coincide with the combinatorial R matrices of U'_q(A^{(1)}_{M-1}). A piecewise linear evolution equation of the automaton is identified with an ultradiscrete limit of the nonautonomous discrete KP equation. A class of N soliton solutions is obtained through the ultradiscretization of soliton solutions of the latter.