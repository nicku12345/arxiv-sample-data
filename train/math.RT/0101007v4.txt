An affine Hecke algebra H contains a large abelian subalgebra A. The center Z of H is the subalgebra of Weyl group invariant elements in A. The natural trace of the affine Hecke algebra can be written as an integral of a rational n form (with values in the linear dual of H) over a certain cycle in the algebraic torus T=spec(A). We derive the Plancherel formula of the affine Hecke algebra by localization of this integral on a certain subset of spec(Z).