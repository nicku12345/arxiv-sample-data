We give an exact algorithm to calculate (under some GKM-restriction) the matrix describing the embedding \B(\s)_x\subset\B(\s)^x, where the first module is the costalk and the second one is the stalk at x of a Bott-Samelson module (sheaf) \B(\s). This allows us to calculate the first few terms of the decomposition of \B(\s) into a sum of indecomposable modules (sheaves) and to calculate the characters of Braden--MacPherson sheaves in some previously unknown cases.