Almost toric manifolds form a class of singular Lagrangian fibered symplectic manifolds that is a natural generalization of toric manifolds. Notable examples include the K3 surface, the phase space of the spherical pendulum and rational balls useful for symplectic surgeries. The main result of the paper is a complete classification up to diffeomorphism of closed almost toric four-manifolds.   A key step in the proof is a geometric classification of the singular affine structures that can occur on the base of a closed almost toric four-manifold.