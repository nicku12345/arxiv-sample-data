We extend Perutz's Lagrangian matching invariants to 3-manifolds which are not necessarily fibred using the technology of holomorphic quilts. We prove an isomorphism of these invariants with Ozsvath-Szabo's Heegaard Floer invariants for certain extremal spin^c structures. As applications, we give new calculations of Heegaard Floer homology of certain classes of 3-manifolds, and a characterization of Juhasz's sutured Floer homology.