We introduce the secondary Stiefel-Whitney class \tilde w_2 of homotopically trivial diffeomorphisms and show that a homotopically trivial symplectomorphism of a ruled 4-manifold is isotopic to identity if and only if the class \tilde w_2 vanishes.   Using this, we give a detailed description of the combinatorial structure of the diffeotopy group of ruled symplectic 4-manifolds X, either minimal or blown-up, and its action on the homology and homotopy groups H_2(X,\zz), \pi_1(X), and \pi_2(X).