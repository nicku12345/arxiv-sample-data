We use generating function techniques developed by Givental, Th\'eret and ourselves to deduce a proof in \mathbb{C}\text{P}^d of the homological generalization of Franks theorem due to Shelukhin. This result proves in particular the Hofer-Zehnder conjecture in the non-degenerated case: every Hamiltonian diffeomorphism of \mathbb{C}\text{P}^d that has at least d+2 non-degenerated periodic points has infinitely many periodic points. Our proof does not appeal to Floer homology or the theory of J-holomorphic curves. An appendix written by Shelukhin contains a new proof of the Smith-type inequality for barcodes of Hamiltonian diffeomorphisms that arise from Floer theory, which lends itself to adaptation to the setting of generating functions.