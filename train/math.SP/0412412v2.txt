We calculate the spectra and spectral measures associated to random walks on restricted wreath products of finite groups with the infinite cyclic group, by calculating the Kesten-von Neumann-Serre spectral measures for the random walks on Schreier graphs of certain groups generated by automata. This generalises the work of Grigorchuk and Zuk on the lamplighter group. In the process we characterise when the usual spectral measure for a group generated by automata coincides with the Kesten-von Neumann-Serre spectral measure.