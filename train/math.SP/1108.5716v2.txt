A general scheme for tridiagonalising differential, difference or q-difference operators using orthogonal polynomials is described. From the tridiagonal form the spectral decomposition can be described in terms of the orthogonality measure of generally different orthogonal polynomials. Three examples are worked out: (1) related to Jacobi and Wilson polynomials for a second order differential operator, (2) related to little q-Jacobi polynomials and Askey-Wilson polynomials for a bounded second order q-difference operator, (3) related to little q-Jacobi polynomials for an unbounded second order q-difference operator. In case (1) a link with the Jacobi function transform is established, for which we give a q-analogue using example (2).