Adaptive estimation of a quadratic functional over both Besov and L_p balls is considered. A collection of nonquadratic estimators are developed which have useful bias and variance properties over individual Besov and L_p balls. An adaptive procedure is then constructed based on penalized maximization over this collection of nonquadratic estimators. This procedure is shown to be optimally rate adaptive over the entire range of Besov and L_p balls in the sense that it attains certain constrained risk bounds.