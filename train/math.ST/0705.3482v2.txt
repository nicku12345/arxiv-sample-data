We consider the problem of estimating a density f_X using a sample Y_1,...,Y_n from f_Y=f_X\star f_{\epsilon}, where f_{\epsilon} is an unknown density. We assume that an additional sample \epsilon_1,...,\epsilon_m from f_{\epsilon} is observed. Estimators of f_X and its derivatives are constructed by using nonparametric estimators of f_Y and f_{\epsilon} and by applying a spectral cut-off in the Fourier domain. We derive the rate of convergence of the estimators in case of a known and unknown error density f_{\epsilon}, where it is assumed that f_X satisfies a polynomial, logarithmic or general source condition. It is shown that the proposed estimators are asymptotically optimal in a minimax sense in the models with known or unknown error density, if the density f_X belongs to a Sobolev space H_{\mathbh p} and f_{\epsilon} is ordinary smooth or supersmooth.