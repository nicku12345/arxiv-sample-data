In this article, we introduce a conditional marginal model for longitudinal data, in which the residuals form a martingale difference sequence. This model allows us to consider a rich class of estimating equations, which contains several estimating equations proposed in the literature. A particular sequence of estimating equations in this class contains a random matrix \mathcal{R}_{i-1}^*(\beta), as a replacement for the ``true'' conditional correlation matrix of the i-th individual. Using the approach of [12], we identify some sufficient conditions under which this particular sequence of equations is asymptotically optimal (in our class). In the second part of the article, we identify a second set of conditions, under which we prove the existence and strong consistency of a sequence of estimators of \beta, defined as roots of estimation equations which are martingale transforms (in particular, roots of the sequence of asymptotically optimal equations).