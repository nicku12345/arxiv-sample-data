We consider the problem of statistical learning for the intensity of a counting process with covariates. In this context, we introduce an empirical risk, and prove risk bounds for the corresponding empirical risk minimizers. Then, we give an oracle inequality for the popular algorithm of aggregation with exponential weights. This provides a way of constructing estimators that are adaptive to the smoothness and to the structure of the intensity. We prove that these estimators are adaptive over anisotropic Besov balls. The probabilistic tools are maximal inequalities using the generic chaining mechanism, which was introduced by Talagrand (2006), together with Bernstein's inequality for the underlying martingales.