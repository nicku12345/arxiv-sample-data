We will focus on estimating the integrated covariance of two diffusion processes observed in a nonsynchronous manner. The observation data is contaminated by some noise, which is possibly correlated with the returns of the diffusion processes, while the sampling times also possibly depend on the observed processes. In a high-frequency setting, we consider a modified version of the pre-averaged Hayashi-Yoshida estimator, and we show that such a kind of estimators has the consistency and the asymptotic mixed normality, and attains the optimal rate of convergence.