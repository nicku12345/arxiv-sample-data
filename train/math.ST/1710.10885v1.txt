In this paper the problems of the retrospective analysis of models with time-varying structure are considered. These models include contamination models with randomly switching parameters and multivariate classification models with an arbitrary number of classes. Our main task here is to classify observations with different stochastic generation mechanisms. A new classification method is proposed. We analyze its properties both theoretically and empirically. The asymptotic optimality of the propodsed method (by the order of convergence to zero of the estimation error) is also established. At the end of the paper we consider multivariate change-in-mean models and multivariate regression models.